<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spil og Koder</title>
</head>
<body>
    <h1>Spil og Koder</h1>

    <div id="loginForm">
        <h2>Log Ind</h2>
        <label for="username">Brugernavn:</label>
        <input type="text" id="username" name="username" required><br>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br>

        <button onclick="login()">Log Ind</button>
    </div>

    <div id="gamePage" style="display: none;">
        <h2>Indsæt dit eget spil her</h2>
        <textarea id="gameCode" rows="10" cols="50"></textarea><br>
        <button onclick="runGame()">Start Spil</button>

        <h2>Alle Koder</h2>
        <ul id="allCodes"></ul>
    </div>

    <script>
        function login() {
            // Implementer login-logik her
            // Efter succesfuld login, skift visningen fra loginForm til gamePage
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('gamePage').style.display = 'block';
        }

        function runGame() {
            // Implementer spil-logik her
        }

        // Hent alle koder fra serveren
        async function getAllCodes() {
            const response = await fetch('http://localhost:3000/getAllCodes');
            const codes = await response.json();

            const allCodesList = document.getElementById('allCodes');
            allCodesList.innerHTML = '';

            codes.forEach(code => {
                const listItem = document.createElement('li');
                listItem.textContent = `${code.username}: ${code.code}`;
                allCodesList.appendChild(listItem);
            });
        }

        // Hent koder ved siden af spilsiden
        getAllCodes();
    </script>
</body>
</html>



const express = require('express');
const mongoose = require('mongoose');
const bodyParser = require('body-parser');

const app = express();
const port = 3000;

app.use(bodyParser.json());

mongoose.connect('mongodb://localhost:27017/spilogkoder', { useNewUrlParser: true, useUnifiedTopology: true });

const codeSchema = new mongoose.Schema({
    username: String,
    code: String,
});

const Code = mongoose.model('Code', codeSchema);

app.use(express.static('public'));

app.get('/', (req, res) => {
    res.sendFile(__dirname + '/public/index.html');
});

app.post('/saveCode', async (req, res) => {
    const { username, code } = req.body;

    try {
        const newCode = new Code({ username, code });
        await newCode.save();
        res.status(200).send('Kode gemt.');
    } catch (error) {
        res.status(500).send('Fejl ved gemning af kode.');
    }
});

app.get('/getAllCodes', async (req, res) => {
    try {
        const allCodes = await Code.find({}, 'username code');
        res.status(200).json(allCodes);
    } catch (error) {
        res.status(500).send('Fejl ved hentning af koder.');
    }
});

app.listen(port, () => {
    console.log(`Server kører på http://localhost:${port}`);
});
